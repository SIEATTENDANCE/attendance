<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
<title>异常申请管理</title>
<!-- Bootstrap -->
<link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet"
	media="screen">
<!-- 导入日历插件css -->
<link href="../bootstrap/css/bootstrap-datetimepicker.min.css"
	rel="stylesheet" media="screen">
<!-- 导入表格插件css -->
<link href="../bootstrap/css/bootstrap-table.min.css" rel="stylesheet"
	media="screen">
<script src="../common/lib/html5.js"></script>
<script src="../common/lib/respond.min.js"></script>
<style type="text/css">
th {
	text-align: center;
	vertical-align: middle !important;
}
</style>
</head>
<body>
	<div class="container">
		<h2 align="center">异常申请变更单</h2>
		<hr style="background-color: red; height: 1px">
		<div>
			<div align="center" id="fload_id">编号：</div>
			<label class="col-md-2"></label>
			<div class="col-md-8">
				<table border="1" class="table table-bordered" id="">
					<tr>
						<th width="140" height="70;">考勤记录变更</th>
						<td>
							<table class="table table-condensed" id="exceRecords">
								<tr>
									<td>工号</td>
									<td>姓名</td>
									<td>日期</td>
									<td>类型</td>
									<td>状态</td>
									<td>变更原因</td>
									<td><input type="image" src="../common/image/add.jpg"
										width="25" height="20" id="addRecords"/></td>
								</tr>
							</table>
						</td>
					</tr>
					<tr>
						<th height="45">附件管理</th>
						<td></td>
					</tr>
					<tr>
						<th height="70">科室审核</th>
						<td><div id = "officeAdvice" ></div></td>
					</tr>
					<tr>
						<th height="70">部门审核</th>
						<td><div id = "managerAdvice" ></div></td>
					</tr>
					<tr>
						<th height="100">备注</th>
						<td><textarea id = "remarkMess" placeholder="输入备注信息" cols="78" rows="4"></textarea></td>
					</tr>
				</table>
				<label class="col-md-3"></label>
				<div id="toolbar" class="btn-group btn-group-lg">
					<button id="btn_add" type="button" class="btn btn-default">
						<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>保存
					</button>
					<button id="btn_edit" type="button" class="btn btn-default">
						<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>提交
					</button>
					<button id="btn_edit" type="button" class="btn btn-default">
						<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>退回
					</button>
					<button id="btn_delete" type="button" class="btn btn-default">
						<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>关闭
					</button>
				</div>
			</div>
		</div>
	</div>

</body>
<script src="../bootstrap/jquery.min.js"></script>
<script src="../bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript">
$(function(){
	var params = location.search; 
	var exceptionNum = ""; 
	if (params.indexOf("?") == -1) { 
		//如果是新增页面，则不加载数据
	}else{
		exceptionNum = params.substring(params.indexOf("=")+1);
		document.getElementById("fload_id"). innerHTML = '编号：' + exceptionNum;
		$.post("../rest/ExceptionRequest/editExceptionRecord", {
			"exceptionNum" : exceptionNum
		}, function(data) {
			var html="";
			var size = data.resultList.length;
			for(var i=0;i<size;i++){
				html+="<tr><td>"+data.resultList[i].emp_id+"</td><td>"+data.resultList[i].emp_name+"</td><td>"+data.resultList[i].date+"</td><td>"+data.resultList[i].work_state+"</td><td><input type='text' class='reason' value='"+data.resultList[i].reason+"'</td></tr>";
			}
			$("#exceRecords").append(html);
			if(data.resultMap.note != null){
				document.getElementById("remarkMess"). innerHTML = data.resultMap.note;
			}
		});
	}
	
	$('#addRecords').click(openAttendWindow);
	
	//打开子窗口,相关打卡列表
	function openAttendWindow() {
		var value = 
 		window.open("exceptionRecord.html","noRepeat","top=150,left=350,width=700,height=400,menubar=yes,scrollbars=no,toolbar=yes,status=yes");
	}
	
});
</script>
</html>